{% extends 'base.html' %}
{% load static %}

{% block 'titulo' %}Dashboard{% endblock%}

{% block 'head' %}

<!--   Core JS Files   -->
<script src="/static/js/core/jquery.min.js"></script>
<script src="/static/js/core/popper.min.js"></script>
<script src="/static/js/core/bootstrap.min.js"></script>
<!-- <script src="/static/js/plugins/perfect-scrollbar.jquery.min.js"></script> -->
<!-- <script src="/static/js/plugins/chartjs.min.js"></script> -->
<!-- <script src="/static/js/plugins/bootstrap-notify.js"></script> -->
<!-- <script src="/static/js/black-dashboard.min.js?v=1.0.0"></script> -->
<!-- <script src="/static/js/demo.js"></script> -->


<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<link rel="shortcut icon" href="#">
<!-- Nucleo Icons -->
<link href="/static/css/nucleo-icons.css" rel="stylesheet" />
<!-- CSS Files -->
<link href="/static/css/black-dashboard.css?v=1.0.0" rel="stylesheet" />

<!-- <link href="/static/scss/black-dashboard.scss?v=1.0.0" rel="stylesheet" /> -->


{% endblock%}


{% block 'body' %}
<div class="row-10">
    <div class="col">
        <div class="row">
            <div class="col-7">
                <div class="card card-chart">
                    <div class="card-header ">
                        <div class="row">
                            <div class="col-sm-6 text-left">
                                <h5 class="card-category">All Containers</h5>
                                <h3 class="card-title"><i class="tim-icons icon-components"></i>CPU</h3>
                            </div>
                            <div class="card-header">
                                <div class="dropdown">
                                    <button type="button" class="btn btn-link dropdown-toggle btn-icon"
                                        data-toggle="dropdown">
                                        <i class="tim-icons icon-settings-gear-63"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-item" data-value="1">CPU</div>
                                        <div class="dropdown-item" data-value="0">MEM</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartCpuBig"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Server</h5>
                        <h3 class="card-title"><i class="tim-icons icon-components text-red"></i>CPU</h3>
                    </div>
                    <div class="card-header">
                        <!-- <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon"
                                data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div> -->
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartCpuServer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Server</h5>
                        <h3 class="card-title"><i class="tim-icons icon-mobile text-success"></i>MEM</h3>
                    </div>
                    <div class="card-header ">
                        <!-- <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon"
                                data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div> -->
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartMemServer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Per container</h5>
                        <h3 class="card-title"><i class="tim-icons icon-components text-red"></i> CPU</h3>
                    </div>
                    <div class="card-header">
                        <div class="ui selection dropdown" id="cpu-per-container">
                        <!-- <button type="selection button" class="btn btn-link dropdown-toggle btn-icon" data-toggle="dropdown">
                            <i class="tim-icons icon-settings-gear-63"></i>
                        </button> -->
                            <select class="btn btn-link dropdown-toggle btn-icon"  id="container-data-box"></select>
                            <!-- <div class="dropdown-menu dropdown-menu-right" id="container-data-box"></div> -->
                            
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartCpuPerContainer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Per container</h5>
                        <h3 class="card-title"><i class="tim-icons icon-mobile text-success"></i> MEM</h3>
                    </div>
                    <div class="card-header ">
                        <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon" data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartMemPerContainer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Per container</h5>
                        <h3 class="card-title"><i class="tim-icons icon-world text-yelow"></i>NET</h3>
                    </div>
                    <div class="card-header ">
                        <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon" data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartNetPerContainer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Per container</h5>
                        <h3 class="card-title"><i class="tim-icons icon-chart-pie-36 text-orange"></i>USED MEM</h3>
                    </div>
                    <div class="card-header ">
                        <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon" data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartUsedMemServer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="card card-chart">
                    <div class="card-header">
                        <h5 class="card-category">Server</h5>
                        <h3 class="card-title"><i class="tim-icons icon-chart-pie-36 text-info"></i>DISK</h3>
                    </div>
                    <div class="card-header ">
                        <!-- <div class="dropdown">
                            <button type="button" class="btn btn-link dropdown-toggle btn-icon"
                                data-toggle="dropdown">
                                <i class="tim-icons icon-settings-gear-63"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdownMenuLink">
                                {% for container in qs %}
                                <div class="dropdown-item" data-value="{{container}}">{{container.name}}</div>
                                {% endfor %}
                            </div>
                        </div> -->
                    </div>
                    <div class="card-body">
                        <div class="chart-area">
                            <canvas id="chartDiskPerContainer"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/func.js' %}"></script>
<script src="{% static 'js/semantic.js' %}"></script>


<script>
    window.onload = function (e) {
        consumo_de_cpu_all("{% url 'getHistoryAllContainer' 'cpu_per' %}")
        consumo_de_cpu_per_container("{% url 'getHistoryContainer' 'fkcp-logstash' 'cpu_per' %}")
        consumo_de_mem_per_container("{% url 'getHistoryContainer' 'fkcp-logstash' 'mem_per' %}")
        consumo_de_disk_per_container("{% url 'getServer' 'disk_per' %}")
        consumo_de_net_per_container("{% url 'getContainer' 'fkcp-logstash' 'net_rx' %}")
        memUsedPerContainer("{% url 'getContainer' 'fkcp-logstash' 'mem_used' %}")
        consumo_de_cpu_server("{% url 'getServer' 'cpu_per' %}")
        consumo_de_mem_server("{% url 'getServer' 'mem_per' %}")
    }

</script>

{% endblock %}